(function(){"use strict";/**
 * @copyright  (C) 2018 Open Source Matters, Inc. <https://www.joomla.org>
 * @license    GNU General Public License version 2 or later; see LICENSE.txt
 */(function(o,r,d,i){if(!r)throw new Error("core.js was not properly initialised");var c=function(n){var t=n.target;t.value.length>1&&(t.awesomplete.list=[],r.request({url:r.getOptions("finder-search").url+"&q="+t.value,promise:!0}).then(function(e){var s;try{s=JSON.parse(e.responseText)}catch{r.renderMessages(r.ajaxErrorsMessages(e,"parsererror"));return}Object.prototype.toString.call(s.suggestions)==="[object Array]"&&(t.awesomplete.list=s.suggestions)}).catch(function(e){r.renderMessages(r.ajaxErrorsMessages(e))}))},l=function(n){n.stopPropagation();var t=n.target.querySelector(".js-finder-advanced");if(t){var e=[].slice.call(t.querySelectorAll("select"));e.forEach(function(s){s.value||s.setAttribute("disabled","disabled")})}},u=function(n){var t=n.target.closest("form");t&&t.submit()},f=function a(){var n=[].slice.call(i.querySelectorAll(".js-finder-search-query"));n.forEach(function(e){if(r.getOptions("finder-search")){e.awesomplete=new o(e),e.addEventListener("input",c);var s=e.closest("form").querySelector(".js-finder-advanced");s||e.addEventListener("awesomplete-selectcomplete",u)}});var t=[].slice.call(i.querySelectorAll(".js-finder-searchform"));t.forEach(function(e){e.addEventListener("submit",l)}),i.removeEventListener("DOMContentLoaded",a)};i.addEventListener("DOMContentLoaded",f)})(window.Awesomplete,window.Joomla,window,document)})();
